# eXocriador Backend API

Backend API –¥–ª—è –æ–±—Ä–æ–±–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç–Ω–æ—ó —Ñ–æ—Ä–º–∏ –∑ eXocriador.dev

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### –í–∏–º–æ–≥–∏

- Node.js 18+
- MongoDB 5+
- npm –∞–±–æ yarn

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. –ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–ø–∫—É backend:

```bash
cd backend
```

3. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:

```bash
npm install
```

4. –°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –Ω–∞ –æ—Å–Ω–æ–≤—ñ `env.example`:

```bash
cp env.example .env
```

5. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞ –≤ `.env`:

```env
MONGODB_URI=mongodb://localhost:27017/exocriador_dev
PORT=3001
NODE_ENV=development
FRONTEND_URL=http://localhost:5173
```

6. –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:

```bash
# –†–æ–∑—Ä–æ–±–∫–∞
npm run dev

# –ü—Ä–æ–¥–∞–∫—à–Ω
npm start
```

## üìä API Endpoints

### –ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —Ñ–æ—Ä–º–∞

#### POST `/api/contact`

–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç—É

**Body:**

```json
{
  "name": "–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
  "email": "user@example.com",
  "message": "–¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è"
}
```

**Response:**

```json
{
  "success": true,
  "message": "–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ!",
  "data": {
    "id": "64f1a2b3c4d5e6f7g8h9i0j1",
    "name": "–Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞",
    "email": "user@example.com",
    "createdAt": "2023-09-01T12:00:00.000Z"
  }
}
```

#### GET `/api/contact`

–û—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—Å—ñ—Ö –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤ (–∑ –ø–∞–≥—ñ–Ω–∞—Ü—ñ—î—é)

**Query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:**

- `page` - –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 1)
- `limit` - –∫—ñ–ª—å–∫—ñ—Å—Ç—å –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: 10)
- `status` - —Ñ—ñ–ª—å—Ç—Ä –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º (new, read, replied, archived)
- `sortBy` - –ø–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º: createdAt)
- `sortOrder` - –ø–æ—Ä—è–¥–æ–∫ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è (asc, desc)

#### GET `/api/contact/:id`

–û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –∫–æ–Ω—Ç–∞–∫—Ç—É –∑–∞ ID

#### PATCH `/api/contact/:id/status`

–û–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞—Ç—É—Å—É –∫–æ–Ω—Ç–∞–∫—Ç—É

**Body:**

```json
{
  "status": "read"
}
```

#### DELETE `/api/contact/:id`

–í–∏–¥–∞–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É

#### GET `/api/contact/stats`

–û—Ç—Ä–∏–º–∞–Ω–Ω—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤

### –°–∏—Å—Ç–µ–º–Ω—ñ

#### GET `/api/health`

–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É —Å–µ—Ä–≤–µ—Ä–∞

## üõ°Ô∏è –ë–µ–∑–ø–µ–∫–∞

- **Helmet** - –∑–∞–≥–æ–ª–æ–≤–∫–∏ –±–µ–∑–ø–µ–∫–∏
- **CORS** - –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è cross-origin –∑–∞–ø–∏—Ç—ñ–≤
- **Rate Limiting** - –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ –∑–∞–ø–∏—Ç—ñ–≤
- **Input Validation** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- **Data Sanitization** - –æ—á–∏—â–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö

## üìù –í–∞–ª—ñ–¥–∞—Ü—ñ—è

–§–æ—Ä–º–∞ –∫–æ–Ω—Ç–∞–∫—Ç—É –º–∞—î –Ω–∞—Å—Ç—É–ø–Ω—ñ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó:

- **–Ü–º'—è**: 2-50 —Å–∏–º–≤–æ–ª—ñ–≤, —Ç—ñ–ª—å–∫–∏ –ª—ñ—Ç–µ—Ä–∏, –ø—Ä–æ–±—ñ–ª–∏, –¥–µ—Ñ—ñ—Å–∏, –∞–ø–æ—Å—Ç—Ä–æ—Ñ–∏
- **Email**: –≤–∞–ª—ñ–¥–Ω–∏–π email —Ñ–æ—Ä–º–∞—Ç, 5-100 —Å–∏–º–≤–æ–ª—ñ–≤
- **–ü–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è**: 10-1000 —Å–∏–º–≤–æ–ª—ñ–≤, –±–µ–∑ HTML —Ç–µ–≥—ñ–≤

## üóÑÔ∏è –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö

### –ú–æ–¥–µ–ª—å Contact

```javascript
{
  name: String,        // –Ü–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  email: String,       // Email –∞–¥—Ä–µ—Å–∞
  message: String,     // –¢–µ–∫—Å—Ç –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  status: String,      // –°—Ç–∞—Ç—É—Å (new, read, replied, archived)
  ipAddress: String,   // IP –∞–¥—Ä–µ—Å–∞
  userAgent: String,   // User-Agent –±—Ä–∞—É–∑–µ—Ä–∞
  createdAt: Date,     // –î–∞—Ç–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è
  updatedAt: Date      // –î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
}
```

### –Ü–Ω–¥–µ–∫—Å–∏

- `email` + `createdAt` - –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –ø–æ—à—É–∫—É –ø–æ email
- `status` + `createdAt` - –¥–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó –∑–∞ —Å—Ç–∞—Ç—É—Å–æ–º
- `createdAt` - –¥–ª—è —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –∑–∞ –¥–∞—Ç–æ—é

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

| –ó–º—ñ–Ω–Ω–∞                    | –û–ø–∏—Å                       | –ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º      |
| ------------------------- | -------------------------- | --------------------- |
| `MONGODB_URI`             | URI –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB | -                     |
| `PORT`                    | –ü–æ—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞               | 3001                  |
| `NODE_ENV`                | –†–µ–∂–∏–º —Ä–æ–±–æ—Ç–∏               | development           |
| `FRONTEND_URL`            | URL —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—É –¥–ª—è CORS     | http://localhost:5173 |
| `RATE_LIMIT_WINDOW_MS`    | –í—ñ–∫–Ω–æ –æ–±–º–µ–∂–µ–Ω–Ω—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ  | 900000 (15 —Ö–≤)        |
| `RATE_LIMIT_MAX_REQUESTS` | –ú–∞–∫—Å–∏–º—É–º –∑–∞–ø–∏—Ç—ñ–≤           | 100                   |

### Rate Limiting

- **–ö–æ–Ω—Ç–∞–∫—Ç–Ω–∞ —Ñ–æ—Ä–º–∞**: 5 –∑–∞–ø–∏—Ç—ñ–≤ –∑–∞ 15 —Ö–≤–∏–ª–∏–Ω
- **–ó–∞–≥–∞–ª—å–Ω—ñ API**: 100 –∑–∞–ø–∏—Ç—ñ–≤ –∑–∞ 15 —Ö–≤–∏–ª–∏–Ω

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
backend/
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.js          # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB
‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îî‚îÄ‚îÄ contactController.js # –õ–æ–≥—ñ–∫–∞ –æ–±—Ä–æ–±–∫–∏ –∑–∞–ø–∏—Ç—ñ–≤
‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ validation.js        # –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ —Å–∞–Ω—ñ—Ç–∏–∑–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ security.js          # –ë–µ–∑–ø–µ–∫–∞ —Ç–∞ –æ–±–º–µ–∂–µ–Ω–Ω—è
‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îî‚îÄ‚îÄ Contact.js           # –ú–æ–¥–µ–ª—å MongoDB
‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îî‚îÄ‚îÄ contactRoutes.js     # API –º–∞—Ä—à—Ä—É—Ç–∏
‚îú‚îÄ‚îÄ .env.example             # –ü—Ä–∏–∫–ª–∞–¥ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
‚îú‚îÄ‚îÄ package.json             # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îú‚îÄ‚îÄ README.md                # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ server.js                # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª —Å–µ—Ä–≤–µ—Ä–∞
```

## üöÄ –†–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

### –õ–æ–∫–∞–ª—å–Ω–µ —Ä–æ–∑–≥–æ—Ä—Ç–∞–Ω–Ω—è

1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å MongoDB –ª–æ–∫–∞–ª—å–Ω–æ
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –±–∞–∑—É –¥–∞–Ω–∏—Ö `exocriador_dev`
3. –ù–∞–ª–∞—à—Ç—É–π—Ç–µ `.env` —Ñ–∞–π–ª
4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å `npm run dev`

### Docker (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

```bash
# –ó–∞–ø—É—Å–∫ MongoDB
docker run -d -p 27017:27017 --name mongodb mongo:latest

# –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É
npm run dev
```

## üìù –õ–æ–≥—É–≤–∞–Ω–Ω—è

–°–µ—Ä–≤–µ—Ä –ª–æ–≥—É—î:

- –í—Å—ñ HTTP –∑–∞–ø–∏—Ç–∏ –∑ IP —Ç–∞ User-Agent
- –ü–æ–º–∏–ª–∫–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö
- –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–∏—Ö –∫–æ–Ω—Ç–∞–∫—Ç—ñ–≤
- –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó —Ç–∞ –æ–±—Ä–æ–±–∫–∏

## üîç –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏:

- **Postman** –∞–±–æ **Insomnia**
- **curl** –∫–æ–º–∞–Ω–¥–∏
- **Thunder Client** (VS Code extension)

### –ü—Ä–∏–∫–ª–∞–¥ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –¢–µ—Å—Ç –∑–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤–µ—Ä–∞
curl http://localhost:3001/api/health

# –¢–µ—Å—Ç —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ–Ω—Ç–∞–∫—Ç—É
curl -X POST http://localhost:3001/api/contact \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–¢–µ—Å—Ç–æ–≤–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á",
    "email": "test@example.com",
    "message": "–¶–µ —Ç–µ—Å—Ç–æ–≤–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ API"
  }'
```

## ü§ù –í–Ω–µ—Å–æ–∫

1. –§–æ—Ä–∫–Ω—ñ—Ç—å —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –≥—ñ–ª–∫—É –¥–ª—è –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó
3. –ó—Ä–æ–±—ñ—Ç—å –∫–æ–º—ñ—Ç –∑–º—ñ–Ω
4. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT License
